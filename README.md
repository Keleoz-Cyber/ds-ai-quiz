# 数据结构智能刷题与错题推荐系统

[![GitHub release (latest by date)](https://img.shields.io/github/v/release/Keleoz-Cyber/ds-ai-quiz)](https://github.com/Keleoz-Cyber/ds-ai-quiz/releases)

## 项目简介

这是一个基于C++开发的数据结构智能刷题系统，采用**模块化架构设计**，集成了错题本管理、AI智能推荐、知识图谱路径规划等功能。系统通过分析用户的做题记录，智能推荐最需要练习的题目，并基于知识点依赖关系生成个性化复习路径，帮助用户高效复习数据结构知识点。

### 📢 最新版本 v1.1.1 更新内容

**核心优化与重构**：

- 🔧 **数据结构优化**：用题目索引替代原始指针，增强内存安全性和代码可维护性
- 🎲 **统一随机数生成**：全模块统一使用 `std::mt19937` 随机数生成器，保证随机性的一致性和质量
- ⌨️ **输入处理改进**：增强用户输入验证与错误处理，提升程序健壮性
- 📝 **代码注释完善**：按 Doxygen 风格为所有模块补充详细中文注释，包含模块职责、函数说明、算法解释、数据格式等
- 🏗️ **架构优化**：重构题目映射机制，从 `unordered_map<int, Question*>` 改为 `unordered_map<int, size_t>`，避免指针管理风险

---

## 目录 / Table of Contents

- [项目简介](#项目简介)
  - [📢 最新版本 v1.1.1 更新内容](#最新版本-v111-更新内容)
- [Quick Start 快速开始](#quick-start-快速开始)
  - [对普通用户（推荐）](#对普通用户推荐)
  - [对开发者（从源码构建）](#对开发者从源码构建)
- [⭐ 设计取舍与非目标（老师必看）](#设计取舍与非目标老师必看)
- [功能特性](#功能特性)
- [项目架构](#项目架构)
- [数据格式](#数据格式)
- [编译与运行](#编译与运行)
- [推荐的运行方式与发行版使用说明](#推荐的运行方式与发行版使用说明)
- [使用说明](#使用说明)
- [核心算法](#核心算法)
- [模拟考试模式](#模拟考试模式)
- [知识点复习路径推荐](#知识点复习路径推荐)
- [统计功能](#统计功能)
- [学习报告导出](#学习报告导出)
- [技术特点](#技术特点)
- [项目维护](#项目维护)
- [开发计划](#开发计划)
- [常见问题](#常见问题)
- [贡献指南](#贡献指南)
- [许可证](#许可证)
- [联系方式](#联系方式)

## Quick Start 快速开始

### 对普通用户（推荐）

如果你只是想使用本系统进行数据结构刷题，无需编译源码，直接使用发行版即可：

1. **下载发行版**
   访问 [GitHub Release 页面](releases)，下载最新版本的压缩包（`DS_AI_Quiz_vX.X.X.zip`）

2. **解压并保持目录结构**
   解压到任意目录，确保以下结构不变：
   ```
   DS_AI_Quiz/
   ├── DS_AI_Quiz.exe
   └── data/
       ├── questions.csv
       └── knowledge_graph.txt
   ```

3. **运行程序**
   - **方式一**：直接双击 `DS_AI_Quiz.exe`
   - **方式二**：在该目录打开命令行，运行 `.\DS_AI_Quiz.exe`

4. **开始使用**
   - 首次运行时输入你的学号或用户名（如 "20240001" 或 "alice"）
   - 系统会自动在 `data/` 目录下为你创建独立的做题记录文件 `records_<用户ID>.csv`
   - 每个用户的数据完全独立，互不影响

> 💡 **提示**：为获得最佳交互体验，建议在系统自带的命令行（cmd/PowerShell）中运行。详细说明请参考[推荐的运行方式与发行版使用说明](#推荐的运行方式与发行版使用说明)。

### 对开发者（从源码构建）

如果你想从源码编译或参与开发，请按照以下步骤操作：

1. **获取源码**
   ```bash
   git clone https://github.com/Keleoz-Cyber/ds-ai-quiz.git
   cd ds-ai-quiz
   ```

2. **创建构建目录**
   ```bash
   mkdir build
   cd build
   ```

3. **使用 CMake 生成构建文件**
   ```bash
   cmake ..
   ```

4. **编译项目**
   ```bash
   # Windows/Linux/MacOS 通用
   cmake --build .

   # 或在 Linux/MacOS 上使用 make
   make
   ```

5. **运行程序**
   ```bash
   # Windows
   .\DS_AI_Quiz.exe

   # Linux/MacOS
   ./DS_AI_Quiz
   ```

> 📋 **环境要求**：C++17 或更高版本、CMake 3.10+、支持的编译器（GCC/Clang/MSVC）。详细编译说明请参考[编译与运行](#编译与运行)章节。

---

## ⭐ 设计取舍与非目标（老师必看）

> 💡 **重要说明**：本章节专门面向课程老师，阐述项目的**工程取舍与设计决策**，以及哪些技术方向暂不纳入本次课设范围，但作为后续扩展方向保留在开发计划中。

### 1) 为什么暂时不做数据库（MySQL/SQLite）

> ✅ **我选择了 CSV + 内存数据结构（unordered_map / priority_queue / DFS）**

**技术决策理由**：

- **项目定位**：本项目是**数据结构课程设计**与**单机学习工具**，核心目标是展示数据结构与算法的实际应用（哈希表、优先队列、图的 DFS、拓扑排序等）
- **数据规模与访问模式**：
  - 当前场景为**本地单用户/少量用户**，**离线使用**，**无并发访问**
  - 题库规模通常在数百题量级，做题记录在千条量级，CSV 文件读写性能完全满足需求
  - 使用 `unordered_map` 实现 O(1) 题目查询，`priority_queue` 实现高效推荐排序，DFS 实现知识图谱路径规划——这些正是课程要求展示的核心数据结构
- **工程复杂度考量**：
  - 引入数据库需要：安装数据库软件（MySQL/SQLite）、配置数据库驱动/库依赖、编写 SQL 语句、设计表结构与索引、处理数据库迁移与版本管理、增加跨平台部署复杂度（用户需要先安装数据库环境）
  - 但对**数据结构与算法的核心展示增益有限**——统计、推荐、路径规划等核心算法的实现逻辑不会因为存储层变化而有本质提升
- **持久化与统计需求已满足**：
  - CSV 格式人类可读，便于调试和验证
  - 当前实现已支持多用户独立记录文件、自动持久化、统计分析、报告导出等所有核心功能
  - 数据结构（unordered_map / vector / set）在内存中的操作效率远高于数据库查询

> 🚫 **数据库属于"后续扩展方向"**：已列入[开发计划](#开发计划)，适合在项目进入生产环境或需要支持高并发多用户时引入。

---

### 2) 为什么暂时不做前端 / 图形化界面（Qt/wxWidgets/Web）

> ✅ **我选择了命令行界面（CLI），保证跨平台、零依赖、快速演示**

**技术决策理由**：

- **项目重点聚焦**：本项目的核心价值在于**数据结构课程实践**：
  - **算法实现**：AI 智能推荐（多维度评分算法）、知识图谱路径规划（DFS + 拓扑排序）、错题本管理（哈希表索引）、统计分析（按知识点分类）
  - **数据结构应用**：`unordered_map`（题目快速查询）、`priority_queue`（推荐排序）、邻接表（知识图谱）、`std::shuffle`（随机抽题）
  - 这些核心内容与界面技术无关，**GUI 的引入不会增强算法展示效果**
- **工程时间分配**：
  - GUI/前端开发会将**大量时间花在界面工程上**：控件布局、事件绑定、样式美化、跨平台适配、打包发布等
  - 这容易**稀释核心算法展示**，偏离"数据结构课程设计"的初衷
  - 命令行界面虽然简单，但**足以完整展示所有功能**：刷题、推荐、统计、路径规划、报告导出等流程都能清晰演示
- **跨平台与部署优势**：
  - **零依赖**：无需安装 Qt/wxWidgets 等 GUI 框架，用户下载发行版即可直接运行
  - **跨平台**：Windows/Linux/MacOS 原生支持命令行，无需额外适配
  - **便于演示与验收**：老师可以直接在任何环境下运行程序，无需配置 GUI 环境
- **交互体验已优化**：
  - 实现了自动清屏、暂停等待、分页显示等交互优化
  - 统计报告支持导出为 Markdown 格式，可在任何编辑器中美观查看

> 🚫 **GUI 可作为后续增强**：已列入[开发计划](#开发计划)，但**不影响当前核心功能的完整性与可演示性**。

---

### 3) 其他暂不做的内容

> ⚠️ **以下功能不在本次课设范围内，但可作为后续扩展方向**

- 🚫 **在线题库同步 / 账号系统 / 云端存储**
  **原因**：需要服务端开发、网络协议、用户认证、数据库运维等，远超课程设计范围；本项目定位为**单机学习工具**，无需网络依赖

- 🚫 **移动端应用（Android/iOS）**
  **原因**：移动端开发链路过长（需要学习移动开发框架、打包、发布），且与数据结构课程核心内容关联度低

- 🚫 **单元测试全覆盖（Google Test 等）**
  **原因**：作为**工程化提升方向**，可在后续逐步补齐；当前通过人工测试与功能演示验证正确性已满足课设要求

- 🚫 **更复杂的题型（填空题/多选题/编程题）**
  **原因**：需要扩展题目数据结构、答案校验逻辑、评分系统等，工作量较大；当前单选题已足以展示所有核心算法，后续可扩展（已列入开发计划）

- 🚫 **知识图谱可视化（Graphviz / Web 图表）**
  **原因**：需要引入图形库或前端技术栈，增加复杂度；当前**文本形式的路径展示**已能清晰表达知识点依赖关系与复习顺序

- 🚫 **学习进度跟踪曲线（时间序列图表）**
  **原因**：需要绘图库或前端可视化，属于数据展示层面的增强；当前**统计报告与 Markdown 导出**已提供详细的学习数据分析

---

### 4) 我做了什么取舍来保证"可交付 & 可演示"

> ✅ **核心策略：优先保证功能闭环与模块化设计，确保课程验收与演示效果**

**设计原则**：

1. **功能闭环优先**：确保核心流程完整可用
   刷题 → 记录 → 错题本 → AI 推荐 → 统计分析 → 知识点路径规划 → 报告导出——所有功能模块已全部实现并联通，用户可以完整体验从刷题到复习规划的全流程

2. **模块化架构设计**：代码清晰易维护
   将系统拆分为 8 个独立模块（Question / Record / Stats / Recommender / KnowledgeGraph / App / Utils / Report），每个模块职责单一，接口清晰，便于老师查看代码与理解实现逻辑

3. **发行版可直接运行**：零配置，快速演示
   提供 GitHub Release 发行版（.zip 压缩包），解压即用，无需编译、无需安装依赖、无需配置环境——老师可以在任何 Windows/Linux/MacOS 机器上立即验证功能

4. **数据结构核心展示**：算法与数据结构的实际应用
   重点展示课程要求的核心数据结构：`unordered_map`（哈希表）、`priority_queue`（堆）、邻接表（图）、DFS（深度优先搜索）、拓扑排序——这些正是数据结构课程的核心内容，比 GUI 美化更有价值

5. **跨平台兼容性**：便于不同环境下验收
   使用 CMake 构建系统，支持 Windows/Linux/MacOS 三大平台；清屏、随机数等底层功能均做了跨平台适配，确保在任何环境下都能正常运行

6. **文档完善**：降低理解与使用门槛
   README 包含详细的架构说明、模块职责、算法原理、使用流程、常见问题解答等，帮助老师快速理解项目设计思路与技术实现

> 💡 **总结**：通过聚焦"数据结构与算法"核心，舍弃"GUI/数据库/网络"等外围技术，确保在有限的课设时间内交付**功能完整、代码清晰、可演示性强**的作品，更符合课程验收标准。

---

## 功能特性

- **多用户支持** ✨：支持按学号/用户名区分不同用户，每个用户拥有独立的做题记录和错题本
- **随机刷题模式**：从题库中随机抽取题目进行练习
- **错题本练习**：专门针对答错的题目进行强化练习
- **AI智能推荐**：基于多维度算法智能推荐最适合当前练习的题目
- **模拟考试模式**：支持自定义题目数量的模拟考试，提供详细成绩报告
- **知识点复习路径推荐**：基于知识点依赖图，智能生成从基础到目标的复习路径
- **做题统计分析**：提供总体统计和按知识点分类的详细统计数据
- **学习报告导出** 📊：自动生成 Markdown 格式的学习报告，包含统计分析和复习建议
- **用户切换功能**：支持在运行时快速切换用户，无需重启程序
- **持久化存储**：自动保存做题记录，每个用户的数据独立存储

## 项目架构

### 模块化设计

项目采用清晰的模块化架构，将功能按职责分离为多个独立模块：

```
DS_AI_Quiz/
├── main.cpp                # 程序入口（主流程简洁）
├── CMakeLists.txt          # CMake构建配置
│
├── Question.h/cpp          # 题目模块
├── Record.h/cpp            # 记录模块
├── Stats.h/cpp             # 统计模块
├── Recommender.h/cpp       # 推荐模块
├── KnowledgeGraph.h/cpp    # 知识图模块
├── App.h/cpp               # 应用层模块
├── Utils.h/cpp             # 工具模块（清屏、暂停等）
├── Report.h/cpp            # 报告模块（学习报告导出）
│
├── data/                   # 数据目录
│   ├── questions.csv       # 题库文件
│   ├── records_<用户ID>.csv # 用户做题记录文件（自动生成）
│   └── knowledge_graph.txt # 知识点依赖图文件
│
├── reports/                # 报告目录（自动生成）
│   └── report_<用户ID>_<时间>.md # 学习报告文件（自动生成）
│
└── README.md               # 项目文档
```

### 核心模块说明

#### 1. Question 模块 (Question.h/cpp)
**职责**：题目数据管理
- `struct Question`：题目数据结构定义
- `g_questions`：全局题库容器
- `g_questionById`：题号到题目索引的快速映射（v1.1.1+ 优化：使用 `unordered_map<int, size_t>` 替代原始指针）
- `loadQuestionsFromFile()`：从CSV文件加载题库

#### 2. Record 模块 (Record.h/cpp)
**职责**：做题记录管理
- `struct Record`：记录数据结构定义
- `g_records`：所有做题记录
- `g_recordsByQuestion`：按题目分组的记录索引
- `g_wrongQuestions`：当前错题集合
- `g_currentUserId`：当前用户ID（多用户支持）
- `getRecordFilePath()`：获取当前用户的记录文件路径
- `loginUser()`：用户登录
- `clearUserRecords()`：清空当前用户记录（切换用户时使用）
- `loadRecordsFromFile()`：加载历史记录
- `appendRecordToFile()`：追加记录到文件
- `doQuestion()`：执行答题流程（核心功能）

#### 3. Stats 模块 (Stats.h/cpp)
**职责**：统计分析
- `struct QuestionStat`：题目统计信息
- `struct KnowledgeStat`：知识点统计信息
- `buildQuestionStats()`：构建题目维度统计
- `buildKnowledgeStats()`：构建知识点维度统计
- `showStatistics()`：展示统计报告

#### 4. Recommender 模块 (Recommender.h/cpp)
**职责**：AI智能推荐
- `struct RecommendItem`：推荐项（带评分）
- `computeRecommendScore()`：多维度推荐算法
- `aiRecommendMode()`：AI推荐模式主流程

#### 5. KnowledgeGraph 模块 (KnowledgeGraph.h/cpp)
**职责**：知识图谱管理
- `g_knowledgePrereq`：知识点依赖关系（邻接表）
- `g_allKnowledgeNodes`：所有知识点节点集合
- `loadKnowledgeGraphFromFile()`：加载知识图
- `dfsReviewPath()`：DFS生成复习路径
- `recommendReviewPath()`：复习路径推荐主流程

#### 6. App 模块 (App.h/cpp)
**职责**：用户交互与应用逻辑
- `showMenu()`：显示主菜单
- `randomPractice()`：随机刷题
- `wrongBookMode()`：错题本练习
- `examMode()`：模拟考试
- `switchUser()`：切换用户
- `runMenuLoop()`：主菜单循环

#### 7. Utils 模块 (Utils.h/cpp)
**职责**：通用工具函数
- `clearScreen()`：跨平台清屏函数（Windows 使用 cls，其他平台使用 ANSI 转义序列）
- `pauseForUser()`：暂停并等待用户按回车继续，提升界面交互体验

#### 8. Report 模块 (Report.h/cpp)
**职责**：学习报告生成与导出
- `exportLearningReport()`：导出学习报告主流程
- `getTimeStringForFilename()`：生成文件名时间戳
- `getTimeStringForDisplay()`：生成报告显示时间
- 自动生成 Markdown 格式报告，包含：
  - 总体统计（作答题数、正确率、错题数）
  - 按知识点统计（作答次数、正确率）
  - 错题分布分析（按知识点、按难度）
  - 个性化复习建议

## 数据格式

### 题库文件格式 (data/questions.csv)

每行一道题，字段用逗号 `,` 分隔（标准CSV格式）：

```
题号,题目描述,选项A,选项B,选项C,选项D,正确答案索引,知识点,难度等级
```

示例：
```csv
1,数组的随机访问时间复杂度是？,O(1),O(n),O(log n),O(n^2),0,数组,1
2,二叉树的先序遍历顺序是？,根左右,左根右,左右根,根右左,0,树与二叉树,2
3,栈的特点是？,先进先出,后进先出,随机访问,优先级,1,栈,1
```

**字段说明**：
- 题号：整数，唯一标识
- 题目描述：问题文本
- 选项A-D：四个选项
- 正确答案索引：0-3，对应A-D
- 知识点：用于分类统计和路径推荐
- 难度等级：1-5，用于AI推荐算法

### 做题记录格式 (data/records_<用户ID>.csv)

自动生成，每个用户的记录保存在独立文件中，文件名格式：`records_<用户ID>.csv`

例如：
- 用户 "20240001" 的记录保存在 `data/records_20240001.csv`
- 用户 "alice" 的记录保存在 `data/records_alice.csv`

每行一条记录，字段用逗号 `,` 分隔：

```
题号,是否正确(0/1),用时(秒),时间戳
```

示例：
```csv
1,1,15,1702345678
2,0,23,1702345701
1,1,12,1702345734
```

### 知识点依赖图格式 (data/knowledge_graph.txt)

定义知识点之间的前置关系，每行一个知识点：

```
当前知识点|前置知识点1,前置知识点2,...
```

示例：
```
线性表|
栈|线性表
队列|线性表
串|线性表
数组|线性表
树与二叉树|栈,队列
图|树与二叉树
查找|线性表,树与二叉树
排序|数组
哈希表|线性表
```

**说明**：
- 如果某知识点没有前置（如"线性表"），竖线后留空
- 多个前置知识点用逗号分隔
- 该文件用于生成复习路径推荐

## 编译与运行

### 环境要求

- **C++标准**：C++17 或更高版本
- **CMake**：3.10 或更高版本
- **编译器**：支持 GCC、Clang、MSVC
- **平台**：Windows/Linux/MacOS

### 编译步骤

```bash
# 1. 克隆或下载项目
cd DS_AI_Quiz

# 2. 创建构建目录
mkdir build
cd build

# 3. 使用CMake生成构建文件
cmake ..

# 4. 编译项目
cmake --build .

# 或使用 make（Linux/MacOS）
make
```

### 运行程序

```bash
# Windows
.\DS_AI_Quiz.exe

# Linux/MacOS
./DS_AI_Quiz
```

**注意**：首次运行前，请确保 `data/` 目录下有 `questions.csv` 文件。

## 推荐的运行方式与发行版使用说明

### 优先使用 GitHub Release 发行版

对于普通用户，我们**强烈推荐**直接使用 GitHub Release 页面提供的发行版压缩包，无需自行编译。

#### 发行版目录结构

下载并解压后，你会看到以下目录结构：

```
DS_AI_Quiz/
├── DS_AI_Quiz.exe          # 可执行文件
└── data/                   # 数据目录
    ├── questions.csv       # 题库文件（必需）
    ├── knowledge_graph.txt # 知识点依赖图（可选）
    └── records_*.csv       # 用户做题记录（自动生成）
```

#### 使用方法

1. **解压到任意目录**：将下载的压缩包解压到你希望存放的位置
2. **保持目录结构**：⚠️ 不要移动或分离 `DS_AI_Quiz.exe` 和 `data` 文件夹
3. **直接运行**：双击 `DS_AI_Quiz.exe` 或在该目录中打开命令行运行

```bash
# 在解压后的目录中
.\DS_AI_Quiz.exe
```

### 关于路径定位的说明

**✅ 自动路径定位（v1.1+ 新特性）**

本程序已升级为**基于可执行文件所在目录定位资源文件**，无需担心工作目录问题：

- 所有数据文件从"**可执行文件所在目录下的 `data` 文件夹**"读取
- 学习报告导出到"**可执行文件所在目录下的 `reports` 文件夹**"
- **从任意工作目录启动程序都能正常找到资源文件**

**这意味着：**

✅ **直接双击运行**：在任何位置双击 `DS_AI_Quiz.exe` 都能正常工作

✅ **从任意路径调用**：以下操作都是合法的

```bash
# 当前在 C:\Users\YourName
C:\Users\YourName> D:\Projects\DS_AI_Quiz\DS_AI_Quiz.exe
# ✅ 程序会自动在 D:\Projects\DS_AI_Quiz\data 中查找资源文件

# 或使用相对路径
C:\Users\YourName> ..\DS_AI_Quiz\DS_AI_Quiz.exe
# ✅ 同样能正确定位资源
```

**启动自检功能：**

程序启动时会自动检查必要文件（`questions.csv`、`knowledge_graph.txt`）是否存在：
- 若缺失，会显示清晰的中文错误提示，告知当前查找路径和建议解决方案
- 确保目录结构正确：`DS_AI_Quiz.exe` 与 `data/` 文件夹在同一目录即可

### 清屏效果说明

为了提供良好的界面交互体验，程序使用了清屏功能（`clearScreen()`）：

- ✅ **在原生命令行中效果最佳**：Windows 的 `cmd.exe`、`PowerShell`，以及 IDE 的"在外部控制台运行"模式都能正常清屏
- ⚠️ **IDE 内置控制台可能不完全支持**：某些 IDE（如 CLion、Visual Studio）的内置 Run Console 对 `system("cls")` 或 ANSI 转义序列的支持不完全，可能导致清屏效果不佳或菜单显示异常
- 💡 **推荐做法**：如果你希望获得最佳的界面交互体验，建议在系统自带的命令行中运行发行版 `DS_AI_Quiz.exe`

**注意**：清屏效果不影响程序的核心功能，所有答题、统计、推荐等功能在任何环境下都能正常工作。

## 使用说明

### 首次使用

1. 在 `data/` 目录下创建 `questions.csv` 文件
2. 按照格式添加题目数据（至少添加几道题用于测试）
3. 运行程序，输入学号或用户名（例如："20240001" 或 "alice"）
4. 开始刷题，系统会自动为该用户创建独立的记录文件

### 用户登录

程序启动时会提示输入学号或用户名：

```
=============================
 数据结构智能刷题系统
=============================
请输入学号或用户名：
```

输入用户标识后，系统会：
- 加载该用户的历史做题记录
- 如果是新用户，会自动创建空记录开始
- 所有做题数据都与该用户关联

### 主菜单选项

```
=============================
 数据结构智能刷题与错题推荐系统
=============================
1. 随机刷题
2. 错题本练习
3. AI 智能推荐练习
4. 做题统计查看
5. 模拟考试模式
6. 知识点复习路径推荐
7. 导出学习报告
8. 切换用户
0. 退出
```

- **1 - 随机刷题**：随机抽取一道题目练习
- **2 - 错题本练习**：从错题集中随机抽取题目
- **3 - AI智能推荐**：推荐5道最适合练习的题目
- **4 - 做题统计查看**：查看总体统计和知识点统计
- **5 - 模拟考试模式**：进行自定义题量的模拟考试
- **6 - 知识点复习路径推荐**：基于依赖关系规划复习路径
- **7 - 导出学习报告**：生成 Markdown 格式的详细学习报告
- **8 - 切换用户**：切换到其他用户账号（无需重启程序）
- **0 - 退出程序**

### 切换用户

在主菜单选择 "8. 切换用户"：
1. 输入新的学号或用户名
2. 系统自动加载新用户的做题记录
3. 所有统计和推荐基于新用户的数据

### 答题方式

- 输入选项编号（0-3）提交答案
- 系统自动记录答题时间和正确性
- 答题后立即显示正确答案和解析

### 界面交互优化

系统采用统一的交互流程设计，提供流畅的用户体验：

#### 交互流程
1. **功能执行**：用户选择功能后，系统执行相应操作（刷题、考试、统计等）
2. **暂停等待**：功能结束后显示"按回车键继续..."提示，给用户充足时间查看结果
3. **清屏返回**：用户按回车后自动清屏，重新显示完整主菜单，界面整洁清晰

#### 技术实现
- **统一清屏位置**：在主菜单循环的开始处统一调用 `clearScreen()`
- **功能函数职责**：各功能函数（随机刷题、错题本、AI推荐、考试、统计、知识点路径推荐等）只负责暂停等待（调用 `pauseForUser()`），不负责清屏
- **跨平台兼容**：`clearScreen()` 在 Windows 下使用 `system("cls")`，其他平台使用 ANSI 转义序列 `\033[2J\033[H`

#### 适用场景
此交互优化适用于所有功能模块：
- 随机刷题、错题本练习、AI 推荐练习
- 模拟考试成绩报告展示
- 统计查看
- 知识点复习路径推荐
- 切换用户
- 无效选项提示

## 核心算法

### AI推荐算法

基于多维度评分机制：

```cpp
推荐分数 = 0.6 × 错误率 + 0.3 × 时间间隔 + 0.1 × 难度 + 未做奖励
```

**维度说明**：
1. **错误率权重（60%）**：优先推荐错误率高的题目
2. **时间间隔权重（30%）**：推荐长期未练习的题目（遗忘曲线）
3. **难度权重（10%）**：考虑题目难度（1-5级）
4. **未做题奖励（+0.2）**：为从未做过的题目增加额外推荐分数

### 知识图拓扑排序

使用 DFS 深度优先搜索生成拓扑排序的复习路径：

```
算法流程：
1. 用户选择目标知识点 T
2. 递归查找 T 的所有前置知识点
3. 使用 DFS 遍历依赖树（使用 visited 集合避免循环）
4. 按拓扑顺序组织路径：前置知识点 → 目标知识点
5. 标注每个节点的掌握情况（题数、正确率）
6. 突出显示薄弱环节（正确率 < 60%）
```

## 模拟考试模式

模拟考试模式提供完整的考试体验：

### 功能特点
- **自定义题量**：用户可自由设定考试题目数量（1 ~ 题库总数）
- **随机抽题**：使用 std::shuffle + mt19937 随机算法保证互不重复
- **即时反馈**：每道题作答后立即显示正确答案
- **详细报告**：考试结束后生成包含以下内容的成绩报告：
  - 总题数、答对题数、答错题数
  - 本次考试正确率
  - 按知识点分类的作答统计（题数、正确数、正确率）
- **记录保存**：考试记录自动保存到历史记录中

### 使用流程
1. 在主菜单选择 "5. 模拟考试模式"
2. 输入本次考试的题目数量
3. 依次完成所有题目
4. 查看系统生成的考试成绩报告

## 知识点复习路径推荐

基于知识点依赖图的智能复习路径规划功能：

### 核心原理
- **依赖图建模**：使用邻接表存储知识点之间的前置依赖关系
- **拓扑排序**：通过DFS深度优先搜索生成从基础到目标的学习路径
- **掌握度分析**：结合历史做题记录，评估每个知识点的掌握情况

### 功能特点
- **可视化展示**：按正确率从低到高排列所有知识点
- **智能路径生成**：自动分析目标知识点的所有前置依赖
- **薄弱环节标注**：在路径中突出显示掌握不足的知识点（正确率<60%）
- **未练习提示**：标注尚未练习过的知识点

### 使用流程
1. 在主菜单选择 "6. 知识点复习路径推荐"
2. 查看当前所有知识点的掌握情况（按掌握度排序）
3. 选择想要复习的目标知识点编号
4. 系统生成完整的复习路径，从基础前置到目标知识点
5. 根据推荐路径安排学习计划

### 示例输出

```
========== 推荐复习路径 ==========
目标知识点：图

建议按以下顺序复习：

1. 线性表  [题数: 10, 正确率: 80.0%] →
2. 栈  [题数: 8, 正确率: 75.0%] →
3. 队列  [题数: 6, 正确率: 50.0%] ⚠ 薄弱环节 →
4. 树与二叉树  [题数: 12, 正确率: 58.3%] ⚠ 薄弱环节 →
5. 图  [未练习] ⚠ 需要学习

建议：先巩固前置知识点，再学习后续内容，效果更佳！
====================================
```

## 学习报告导出

系统提供自动生成学习报告功能，将你的学习数据导出为易读的 Markdown 格式文件。

### 功能特点

- **一键导出**：在主菜单选择 "7. 导出学习报告"即可
- **Markdown 格式**：生成的报告可在任何 Markdown 编辑器或查看器中打开
- **自动命名**：文件名包含用户 ID 和时间戳，便于管理和回溯
- **完整统计**：包含总体统计、知识点分析、错题分布等全方位数据
- **个性化建议**：根据你的学习数据自动生成针对性的复习建议

### 报告内容

导出的学习报告包含以下内容：

#### 1. 基本信息
- 当前用户 ID
- 报告生成时间
- 数据来源文件

#### 2. 总体概览
- 总作答题数
- 答对题数与答错题数
- 总体正确率
- 当前错题数量

#### 3. 按知识点统计
以表格形式展示每个知识点的：
- 作答次数
- 答对次数
- 正确率（百分比）

#### 4. 错题分布分析
- **按知识点统计**：各知识点的错题数量
- **按难度统计**：各难度等级的错题数量

#### 5. 复习建议
- **薄弱知识点识别**：自动标注正确率低于 60% 的知识点
- **错题本建议**：针对错题数量给出具体的复习策略
- **功能推荐**：推荐使用 AI 智能推荐和知识点复习路径等功能

### 使用方法

1. 在主菜单选择 "7. 导出学习报告"
2. 系统自动生成报告并保存到 `reports/` 目录
3. 报告文件命名格式：`report_<用户ID>_YYYYMMDD_HHMM.md`

**示例文件名**：
- `report_20240001_20250317_2130.md`
- `report_alice_20250318_1045.md`

### 查看报告

你可以使用以下任意方式查看生成的报告：

- **文本编辑器**：VSCode、Sublime Text、Notepad++ 等
- **Markdown 编辑器**：Typora、Mark Text、Obsidian 等
- **浏览器扩展**：安装 Markdown 查看器扩展
- **在线工具**：上传到 GitHub、GitLab 等平台预览

### 报告目录结构

```
DS_AI_Quiz/
└── reports/                              # 报告目录（自动创建）
    ├── report_20240001_20250317_2130.md  # 用户 20240001 的报告
    ├── report_20240001_20250318_0945.md  # 同一用户的另一份报告
    └── report_alice_20250317_1520.md     # 用户 alice 的报告
```

> 💡 **提示**：系统会自动创建 `reports/` 目录，你可以定期导出报告来跟踪学习进度，查看自己的进步曲线。

## 统计功能

系统提供以下统计信息：

- **总作答题数**
- **答对题数和总体正确率**
- **按知识点分类的作答统计**
  - 每个知识点的总题数
  - 正确题数
  - 正确率（百分比）
- **当前错题数量**

示例输出：
```
===== 总体统计 =====
总作答题数： 50
答对题数：   38
总体正确率： 76%

===== 按知识点统计 =====
[知识点] 数组  总题数: 10  正确数: 9  正确率: 90%
[知识点] 栈  总题数: 8  正确数: 6  正确率: 75%
[知识点] 树与二叉树  总题数: 12  正确数: 7  正确率: 58.3%

当前错题数： 12 道。
```

## 技术特点

### 数据结构与算法
- **图数据结构**：使用邻接表存储知识点依赖关系
- **哈希表**：unordered_map 实现 O(1) 快速查询（v1.1.1+ 优化：使用索引替代指针）
- **优先队列**：priority_queue 实现高效推荐排序
- **DFS算法**：深度优先搜索生成拓扑排序的复习路径
- **现代随机算法**：std::shuffle + mt19937 保证抽题随机性（v1.1.1+ 统一：全模块使用统一 RNG）

### 软件工程
- **模块化设计**：清晰的职责分离，易于维护和扩展
- **头文件保护**：使用 `#pragma once` 防止重复包含
- **extern 声明**：避免全局变量重复定义
- **文件流操作**：实现数据持久化
- **精确计时**：chrono库实现毫秒级计时
- **跨平台支持**：Windows平台支持UTF-8中文显示，清屏功能跨平台兼容
- **友好交互**：暂停等待和自动清屏功能，提升用户体验
- **智能路径定位** ✨：基于可执行文件路径自动定位资源文件，无需担心工作目录问题（Windows 使用 GetModuleFileNameW，Linux 使用 /proc/self/exe）
- **启动自检**：程序启动时自动检查必要资源文件，缺失时给出清晰的中文错误提示和解决方案
- **CI/CD 自动化**：GitHub Actions 自动构建和发布，推送 tag 即可生成 Windows Release 包
- **输入健壮性** ✨ (v1.1.1+)：增强输入验证与错误处理，防止异常输入导致程序崩溃

### 代码质量
- **极简入口**：main.cpp 保持逻辑简洁，仅负责启动自检与资源加载
- **模块独立性**：每个模块可独立编译和测试
- **接口清晰**：头文件只暴露必要的公共接口
- **易于扩展**：添加新功能只需新增模块，不影响现有代码
- **内存安全** ✨ (v1.1.1+)：使用索引替代原始指针，避免悬垂指针和内存管理问题
- **详细注释** ✨ (v1.1.1+)：所有源码与头文件已按 Doxygen 风格补充详细中文注释，包含：
  - 模块职责说明：每个文件顶部说明模块功能、数据结构、依赖关系
  - 函数注释：@brief、@param、@return、@note、@complexity 等完整标注
  - 算法解释：关键算法（AI 推荐、DFS 拓扑排序、错题集维护）的思路与复杂度分析
  - 数据格式：CSV/TXT 文件的列定义、解析策略、容错机制
  - 设计原则：清屏统一放在菜单循环开头、多用户隔离、追加写入等设计理念说明

## 项目维护

### 添加新功能模块

1. 创建新的 .h 和 .cpp 文件
2. 在 CMakeLists.txt 中添加新的 .cpp 文件
3. 在需要的地方 include 新的头文件
4. 重新编译项目

示例：添加一个 Export 模块用于导出学习报告

```cpp
// Export.h
#pragma once
void exportReport(const std::string& filename);

// Export.cpp
#include "Export.h"
#include "Stats.h"
void exportReport(const std::string& filename) {
    // 实现导出逻辑
}

// CMakeLists.txt
add_executable(DS_AI_Quiz
    # ... 其他文件
    Export.cpp
)
```

### 修改现有功能

只需修改对应模块的 .cpp 文件，不影响其他模块。例如：
- 修改推荐算法：只需修改 `Recommender.cpp`
- 修改统计逻辑：只需修改 `Stats.cpp`
- 修改菜单界面：只需修改 `App.cpp`

## 开发计划

- [x] 多用户支持（按学号/用户名区分，独立记录文件）✨
- [x] 学习报告导出（Markdown 格式）📊
- [ ] 支持多种题型（判断题、填空题、多选题等）
- [ ] 添加题目搜索和过滤功能
- [ ] 图形化界面（Qt/wxWidgets）
- [ ] 在线题库同步功能
- [ ] 知识图可视化展示（Graphviz）
- [ ] 学习进度跟踪曲线
- [ ] 移动端支持（通过网络接口）
- [ ] 数据库集成（MySQL/SQLite）
- [ ] 单元测试覆盖（Google Test）

## 常见问题

### Q: 编译时找不到头文件？
A: 确保所有 .h 和 .cpp 文件都在项目根目录下，并且 CMakeLists.txt 正确配置。

### Q: 运行时提示找不到题库文件？
A: 确保 `data/questions.csv` 文件存在且格式正确。程序会在当前工作目录下查找 data 文件夹。

### Q: 中文显示乱码？
A: Windows 平台已自动设置 UTF-8 编码。如果仍有问题，请确保源文件和数据文件都是 UTF-8 编码。

### Q: 如何清除某个用户的所有做题记录？
A: 删除或清空对应的 `data/records_<用户ID>.csv` 文件即可。例如删除 `data/records_20240001.csv` 可清除用户 "20240001" 的记录。

### Q: 多个用户的数据会互相影响吗？
A: 不会。每个用户的做题记录保存在独立文件中，用户之间的数据完全隔离。

### Q: 可以自定义推荐算法的权重吗？
A: 可以，修改 `Recommender.cpp` 中 `computeRecommendScore()` 函数的权重参数即可。

## 贡献指南

欢迎提交 Issue 和 Pull Request！

**代码风格**：
- 使用 4 空格缩进
- 类名使用大驼峰：`QuestionStat`
- 函数名使用小驼峰：`loadQuestionsFromFile()`
- 全局变量使用 `g_` 前缀：`g_questions`
- 头文件使用 `#pragma once`

## 许可证

本项目采用 [MIT License](LICENSE) 开源协议。

## 联系方式

如有问题或建议，欢迎提交 Issue。

---

**项目亮点**：
- ✨ 模块化架构，代码清晰易维护
- 👥 多用户支持，数据独立管理
- 🧠 AI智能推荐算法
- 🗺️ 知识图谱路径规划
- 📊 详细的统计分析
- 📋 学习报告自动生成（Markdown 格式）
- 🎯 模拟考试功能
- 🔄 运行时快速切换用户
- 💾 自动数据持久化
- 🎨 友好的界面交互（暂停等待 + 自动清屏）
- 🚀 高性能实现（哈希表 + 优先队列）
- 🌍 跨平台支持（Windows/Linux/MacOS）
- 🔧 内存安全优化（v1.1.1+：索引替代指针）
- 📖 完善的 Doxygen 风格注释（v1.1.1+）
- 🎲 统一随机数生成器（v1.1.1+）
