# 数据结构智能刷题与错题推荐系统

## 项目简介

这是一个基于C++开发的数据结构智能刷题系统，采用**模块化架构设计**，集成了错题本管理、AI智能推荐、知识图谱路径规划等功能。系统通过分析用户的做题记录，智能推荐最需要练习的题目，并基于知识点依赖关系生成个性化复习路径，帮助用户高效复习数据结构知识点。

## 功能特性

- **随机刷题模式**：从题库中随机抽取题目进行练习
- **错题本练习**：专门针对答错的题目进行强化练习
- **AI智能推荐**：基于多维度算法智能推荐最适合当前练习的题目
- **模拟考试模式**：支持自定义题目数量的模拟考试，提供详细成绩报告
- **知识点复习路径推荐**：基于知识点依赖图，智能生成从基础到目标的复习路径
- **做题统计分析**：提供总体统计和按知识点分类的详细统计数据
- **持久化存储**：自动保存做题记录，支持历史数据加载

## 项目架构

### 模块化设计

项目采用清晰的模块化架构，将功能按职责分离为多个独立模块：

```
DS_AI_Quiz/
├── main.cpp                # 程序入口（仅30行）
├── CMakeLists.txt          # CMake构建配置
│
├── Question.h/cpp          # 题目模块
├── Record.h/cpp            # 记录模块
├── Stats.h/cpp             # 统计模块
├── Recommender.h/cpp       # 推荐模块
├── KnowledgeGraph.h/cpp    # 知识图模块
├── App.h/cpp               # 应用层模块
│
├── data/                   # 数据目录
│   ├── questions.csv       # 题库文件
│   ├── records.csv         # 做题记录文件（自动生成）
│   └── knowledge_graph.txt # 知识点依赖图文件
│
└── README.md               # 项目文档
```

### 核心模块说明

#### 1. Question 模块 (Question.h/cpp)
**职责**：题目数据管理
- `struct Question`：题目数据结构定义
- `g_questions`：全局题库容器
- `g_questionById`：题号到题目的快速映射
- `loadQuestionsFromFile()`：从CSV文件加载题库

#### 2. Record 模块 (Record.h/cpp)
**职责**：做题记录管理
- `struct Record`：记录数据结构定义
- `g_records`：所有做题记录
- `g_recordsByQuestion`：按题目分组的记录索引
- `g_wrongQuestions`：当前错题集合
- `loadRecordsFromFile()`：加载历史记录
- `appendRecordToFile()`：追加记录到文件
- `doQuestion()`：执行答题流程（核心功能）

#### 3. Stats 模块 (Stats.h/cpp)
**职责**：统计分析
- `struct QuestionStat`：题目统计信息
- `struct KnowledgeStat`：知识点统计信息
- `buildQuestionStats()`：构建题目维度统计
- `buildKnowledgeStats()`：构建知识点维度统计
- `showStatistics()`：展示统计报告

#### 4. Recommender 模块 (Recommender.h/cpp)
**职责**：AI智能推荐
- `struct RecommendItem`：推荐项（带评分）
- `computeRecommendScore()`：多维度推荐算法
- `aiRecommendMode()`：AI推荐模式主流程

#### 5. KnowledgeGraph 模块 (KnowledgeGraph.h/cpp)
**职责**：知识图谱管理
- `g_knowledgePrereq`：知识点依赖关系（邻接表）
- `g_allKnowledgeNodes`：所有知识点节点集合
- `loadKnowledgeGraphFromFile()`：加载知识图
- `dfsReviewPath()`：DFS生成复习路径
- `recommendReviewPath()`：复习路径推荐主流程

#### 6. App 模块 (App.h/cpp)
**职责**：用户交互与应用逻辑
- `showMenu()`：显示主菜单
- `randomPractice()`：随机刷题
- `wrongBookMode()`：错题本练习
- `examMode()`：模拟考试
- `runMenuLoop()`：主菜单循环

## 数据格式

### 题库文件格式 (data/questions.csv)

每行一道题，字段用逗号 `,` 分隔（标准CSV格式）：

```
题号,题目描述,选项A,选项B,选项C,选项D,正确答案索引,知识点,难度等级
```

示例：
```csv
1,数组的随机访问时间复杂度是？,O(1),O(n),O(log n),O(n^2),0,数组,1
2,二叉树的先序遍历顺序是？,根左右,左根右,左右根,根右左,0,树与二叉树,2
3,栈的特点是？,先进先出,后进先出,随机访问,优先级,1,栈,1
```

**字段说明**：
- 题号：整数，唯一标识
- 题目描述：问题文本
- 选项A-D：四个选项
- 正确答案索引：0-3，对应A-D
- 知识点：用于分类统计和路径推荐
- 难度等级：1-5，用于AI推荐算法

### 做题记录格式 (data/records.csv)

自动生成，每行一条记录，字段用逗号 `,` 分隔：

```
题号,是否正确(0/1),用时(秒),时间戳
```

示例：
```csv
1,1,15,1702345678
2,0,23,1702345701
1,1,12,1702345734
```

### 知识点依赖图格式 (data/knowledge_graph.txt)

定义知识点之间的前置关系，每行一个知识点：

```
当前知识点|前置知识点1,前置知识点2,...
```

示例：
```
线性表|
栈|线性表
队列|线性表
串|线性表
数组|线性表
树与二叉树|栈,队列
图|树与二叉树
查找|线性表,树与二叉树
排序|数组
哈希表|线性表
```

**说明**：
- 如果某知识点没有前置（如"线性表"），竖线后留空
- 多个前置知识点用逗号分隔
- 该文件用于生成复习路径推荐

## 编译与运行

### 环境要求

- **C++标准**：C++17 或更高版本
- **CMake**：3.10 或更高版本
- **编译器**：支持 GCC、Clang、MSVC
- **平台**：Windows/Linux/MacOS

### 编译步骤

```bash
# 1. 克隆或下载项目
cd DS_AI_Quiz

# 2. 创建构建目录
mkdir build
cd build

# 3. 使用CMake生成构建文件
cmake ..

# 4. 编译项目
cmake --build .

# 或使用 make（Linux/MacOS）
make
```

### 运行程序

```bash
# Windows
.\DS_AI_Quiz.exe

# Linux/MacOS
./DS_AI_Quiz
```

**注意**：首次运行前，请确保 `data/` 目录下有 `questions.csv` 文件。

## 使用说明

### 首次使用

1. 在 `data/` 目录下创建 `questions.csv` 文件
2. 按照格式添加题目数据（至少添加几道题用于测试）
3. 运行程序开始刷题

### 主菜单选项

```
=============================
 数据结构智能刷题与错题推荐系统
=============================
1. 随机刷题
2. 错题本练习
3. AI 智能推荐练习
4. 做题统计查看
5. 模拟考试模式
6. 知识点复习路径推荐
0. 退出
```

- **1 - 随机刷题**：随机抽取一道题目练习
- **2 - 错题本练习**：从错题集中随机抽取题目
- **3 - AI智能推荐**：推荐5道最适合练习的题目
- **4 - 做题统计查看**：查看总体统计和知识点统计
- **5 - 模拟考试模式**：进行自定义题量的模拟考试
- **6 - 知识点复习路径推荐**：基于依赖关系规划复习路径
- **0 - 退出程序**

### 答题方式

- 输入选项编号（0-3）提交答案
- 系统自动记录答题时间和正确性
- 答题后立即显示正确答案和解析

## 核心算法

### AI推荐算法

基于多维度评分机制：

```cpp
推荐分数 = 0.6 × 错误率 + 0.3 × 时间间隔 + 0.1 × 难度 + 未做奖励
```

**维度说明**：
1. **错误率权重（60%）**：优先推荐错误率高的题目
2. **时间间隔权重（30%）**：推荐长期未练习的题目（遗忘曲线）
3. **难度权重（10%）**：考虑题目难度（1-5级）
4. **未做题奖励（+0.2）**：为从未做过的题目增加额外推荐分数

### 知识图拓扑排序

使用 DFS 深度优先搜索生成拓扑排序的复习路径：

```
算法流程：
1. 用户选择目标知识点 T
2. 递归查找 T 的所有前置知识点
3. 使用 DFS 遍历依赖树（使用 visited 集合避免循环）
4. 按拓扑顺序组织路径：前置知识点 → 目标知识点
5. 标注每个节点的掌握情况（题数、正确率）
6. 突出显示薄弱环节（正确率 < 60%）
```

## 模拟考试模式

模拟考试模式提供完整的考试体验：

### 功能特点
- **自定义题量**：用户可自由设定考试题目数量（1 ~ 题库总数）
- **随机抽题**：使用 std::shuffle + mt19937 随机算法保证互不重复
- **即时反馈**：每道题作答后立即显示正确答案
- **详细报告**：考试结束后生成包含以下内容的成绩报告：
  - 总题数、答对题数、答错题数
  - 本次考试正确率
  - 按知识点分类的作答统计（题数、正确数、正确率）
- **记录保存**：考试记录自动保存到历史记录中

### 使用流程
1. 在主菜单选择 "5. 模拟考试模式"
2. 输入本次考试的题目数量
3. 依次完成所有题目
4. 查看系统生成的考试成绩报告

## 知识点复习路径推荐

基于知识点依赖图的智能复习路径规划功能：

### 核心原理
- **依赖图建模**：使用邻接表存储知识点之间的前置依赖关系
- **拓扑排序**：通过DFS深度优先搜索生成从基础到目标的学习路径
- **掌握度分析**：结合历史做题记录，评估每个知识点的掌握情况

### 功能特点
- **可视化展示**：按正确率从低到高排列所有知识点
- **智能路径生成**：自动分析目标知识点的所有前置依赖
- **薄弱环节标注**：在路径中突出显示掌握不足的知识点（正确率<60%）
- **未练习提示**：标注尚未练习过的知识点

### 使用流程
1. 在主菜单选择 "6. 知识点复习路径推荐"
2. 查看当前所有知识点的掌握情况（按掌握度排序）
3. 选择想要复习的目标知识点编号
4. 系统生成完整的复习路径，从基础前置到目标知识点
5. 根据推荐路径安排学习计划

### 示例输出

```
========== 推荐复习路径 ==========
目标知识点：图

建议按以下顺序复习：

1. 线性表  [题数: 10, 正确率: 80.0%] →
2. 栈  [题数: 8, 正确率: 75.0%] →
3. 队列  [题数: 6, 正确率: 50.0%] ⚠ 薄弱环节 →
4. 树与二叉树  [题数: 12, 正确率: 58.3%] ⚠ 薄弱环节 →
5. 图  [未练习] ⚠ 需要学习

建议：先巩固前置知识点，再学习后续内容，效果更佳！
====================================
```

## 统计功能

系统提供以下统计信息：

- **总作答题数**
- **答对题数和总体正确率**
- **按知识点分类的作答统计**
  - 每个知识点的总题数
  - 正确题数
  - 正确率（百分比）
- **当前错题数量**

示例输出：
```
===== 总体统计 =====
总作答题数： 50
答对题数：   38
总体正确率： 76%

===== 按知识点统计 =====
[知识点] 数组  总题数: 10  正确数: 9  正确率: 90%
[知识点] 栈  总题数: 8  正确数: 6  正确率: 75%
[知识点] 树与二叉树  总题数: 12  正确数: 7  正确率: 58.3%

当前错题数： 12 道。
```

## 技术特点

### 数据结构与算法
- **图数据结构**：使用邻接表存储知识点依赖关系
- **哈希表**：unordered_map 实现 O(1) 快速查询
- **优先队列**：priority_queue 实现高效推荐排序
- **DFS算法**：深度优先搜索生成拓扑排序的复习路径
- **现代随机算法**：std::shuffle + mt19937 保证抽题随机性

### 软件工程
- **模块化设计**：清晰的职责分离，易于维护和扩展
- **头文件保护**：使用 `#pragma once` 防止重复包含
- **extern 声明**：避免全局变量重复定义
- **文件流操作**：实现数据持久化
- **精确计时**：chrono库实现毫秒级计时
- **跨平台支持**：Windows平台支持UTF-8中文显示

### 代码质量
- **代码行数**：main.cpp 仅 31 行，极简入口
- **模块独立性**：每个模块可独立编译和测试
- **接口清晰**：头文件只暴露必要的公共接口
- **易于扩展**：添加新功能只需新增模块，不影响现有代码

## 项目维护

### 添加新功能模块

1. 创建新的 .h 和 .cpp 文件
2. 在 CMakeLists.txt 中添加新的 .cpp 文件
3. 在需要的地方 include 新的头文件
4. 重新编译项目

示例：添加一个 Export 模块用于导出学习报告

```cpp
// Export.h
#pragma once
void exportReport(const std::string& filename);

// Export.cpp
#include "Export.h"
#include "Stats.h"
void exportReport(const std::string& filename) {
    // 实现导出逻辑
}

// CMakeLists.txt
add_executable(DS_AI_Quiz
    # ... 其他文件
    Export.cpp
)
```

### 修改现有功能

只需修改对应模块的 .cpp 文件，不影响其他模块。例如：
- 修改推荐算法：只需修改 `Recommender.cpp`
- 修改统计逻辑：只需修改 `Stats.cpp`
- 修改菜单界面：只需修改 `App.cpp`

## 开发计划

- [ ] 支持多种题型（判断题、填空题、多选题等）
- [ ] 添加题目搜索和过滤功能
- [ ] 图形化界面（Qt/wxWidgets）
- [ ] 导出学习报告（PDF/Excel/Markdown）
- [ ] 在线题库同步功能
- [ ] 知识图可视化展示（Graphviz）
- [ ] 学习进度跟踪曲线
- [ ] 移动端支持（通过网络接口）
- [ ] 多用户支持和数据库集成
- [ ] 单元测试覆盖（Google Test）

## 常见问题

### Q: 编译时找不到头文件？
A: 确保所有 .h 和 .cpp 文件都在项目根目录下，并且 CMakeLists.txt 正确配置。

### Q: 运行时提示找不到题库文件？
A: 确保 `data/questions.csv` 文件存在且格式正确。程序会在当前工作目录下查找 data 文件夹。

### Q: 中文显示乱码？
A: Windows 平台已自动设置 UTF-8 编码。如果仍有问题，请确保源文件和数据文件都是 UTF-8 编码。

### Q: 如何清除所有做题记录？
A: 删除或清空 `data/records.csv` 文件即可。

### Q: 可以自定义推荐算法的权重吗？
A: 可以，修改 `Recommender.cpp` 中 `computeRecommendScore()` 函数的权重参数即可。

## 贡献指南

欢迎提交 Issue 和 Pull Request！

**代码风格**：
- 使用 4 空格缩进
- 类名使用大驼峰：`QuestionStat`
- 函数名使用小驼峰：`loadQuestionsFromFile()`
- 全局变量使用 `g_` 前缀：`g_questions`
- 头文件使用 `#pragma once`

## 许可证

本项目仅供学习交流使用。

## 联系方式

如有问题或建议，欢迎提交 Issue。

---

**项目亮点**：
- ✨ 模块化架构，代码清晰易维护
- 🧠 AI智能推荐算法
- 🗺️ 知识图谱路径规划
- 📊 详细的统计分析
- 🎯 模拟考试功能
- 💾 自动数据持久化
- 🚀 高性能实现（哈希表 + 优先队列）
